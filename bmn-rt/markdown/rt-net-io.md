## java网络编程
### 安全性
 * 从网络加载的代码通常禁止哪些操作
   + 不能访问任意内存地址，这个限制是java语言本身和字节码验证器的特性。
   + 不能访问本地文件系统
   + 不能打印文档
   + 不能读取与写入系统剪贴板
   + 不能启动客户端的其它程序。不能使用System.exec()和Runtime.exec()
   + 不能加载内置库或定义内置方法调用。
   + 不能允许使用System.getProperty()获取用户或用户机器信息
   + 不可以定义任何系统属性
   + 不可以创建或操作任何不在同一个ThreadGroup中的Thread
   + 不可以定义或使用ClassLoader, SecurityManager, ContentHandlerFactory, SocketImplFactory, URLStreamHandlerFactory的新实例，必须使用已经存在实例。
   
### URI
 * 格式
   + scheme:scheme-specific-part
   + scheme-specific-part没有特定语法，但是很多具有结构层次的形式
   `//authority/path?query`
   
### URN
 * urn:namcespace:resource_name
 * namespace: 某个授权机构维护的某类资源的集合
   + IANA负责将命名空间分发给不同的组织
   
### URL
 * protocal://username@host:port/path/filename?query#fragment
 * protocal是URI模式的另一种叫法（模式是URI RFC中的说法，协议是java文档中的说法）
 * path是指定服务器的某个目录，路径是相对于服务器文档根目录的，而不必是服务器上文件系统的根目录。
 * filename指目录中的文件，可以省略。
   + 如果省略则由服务器判断发送哪个文件，如该目录下的index.html, 
   + 如果省略则可能服务器返回403错误
 * fragment
   + 如果远程资源是html, 那么此片段标识符将指定该html文档中的一个锚(anchor)
   + 如果远程资源是xml, 指一个XPoint
   + 有些文档称为段(section), java文档称为"Ref"
   
### 相对URL
 * 如果相对链接以"/"开头，那么它是相对于文档根目录的，而不是当前文件所在目录
 * 如果相对链接不是"/"开始，那么它是相对于当前文件所在目录
 
### html
 * 超文本标记语言
 * 属性值可以引在双引号或单引号内
   + 引号只有在值包含内嵌空格时才是必需的。在处理html时，有和没有引号的属性值都要求能够处理。
### XML
 * 可扩展标记语言
 * 由于html标签语言是固定的，
 * 由于xml自定义的所以通过stylesheet来描述每一项应当如何显示。
 * 可能DTD(文档类型定义)来限制xml文档内容
 * 格式严格，标签必须有结束标签，属性必须用引号

### xhtml
 * 遵循xml严格格式规则的html
 
### 响应码
 * 200-299
   + 表示接收、理解并接受了请求
 * 300-399
   + 表示浏览器需要跳转到不同的页面
 * 400-499
   + 表示客户端某些地方有错误。
 * 500-599
   + 表示服务器错误

### MIME 媒体类型
 * 多媒体网络邮件扩展
 * 类型/子类型
 * 扩展子类型
   + 使用前缀x-
   
## 流
### 输出流 OutputStream
 * 基本方法write(int b); 
   + 这个方法接受一个0-255之间的整数使用参数，
   + 使用int作为参数，实际是写入一个无符号字节，java没有无符号字节数据类型，所以使用int来代替只写入低8位，其它3字节被忽略

### 输入流 InputStream
 * 基本方法int read();
 * 所有3个read方法都返回-1表示流结束。
   + 如果流结束，而尚有没有读取的数据，多字节方法会返回这些数据，直到缓冲区清空，其它任何一个read调用会返回-1。
 
### PrintStream
 * 5个标准OutputStream方法的声明没有抛出异常
 * 不能设置字符编码
 * println()的输出是与平台相关的
   + 对称写入控制台时不会产生问题
   + 但对于遵循准确协议的网络客户端与服务器而言
   
### 避免使用readline
 * 有一个隐含的bug, 它们不一定会把一个回车看作行的结束，
 * readline()只识别换行符或回车+换行符对。
   + 如果在流中检测到回车时，readline会继续等待查看一下个字符是否为换行。
   + 如果是换行则丢掉回车与换行，返回string
   + 如果不是换行，就丢掉回车，返回string, 这个额外的字符会作为下一行的一部分读取。
   + 但是如果回车是流的最后一个字符，那么readline就会挂起，等待最后一个字符出现，但这个字符永远不会出现。
 * 这个问题在读取文件时不太明显，因为有-1表示流结束
 * 但是在网络中在最后一个字符这后停止发送数据，则可能是超时。如果不够幸运，程序将永远挂起。
 
## internet地址

### InetAddress
 * InetAddress类是java对IP地址（包括IPv4, IPv6）的高级表示。
 * 创建实例
   + getByName: 通过DNS查询, 同时会缓存查询结果为下次查询快速返回使用
   + getAllByName: 与getByName一样，同时会返回一个域名下的所有ip
   + getByAddress: 不进行DNS查询，通过ip
 * get会通过DNS查询
 * getHostName()获取主机名, 如果没有主机名返回ip
 * getHostAddress()返回ip
 * getAddress() 返回是Ip字符数组，一般用来判断是ip4，ip6。通过length == 4， length== 16
 
### 地址类型
 * isAnyLocalAddress()
   + 是否为通配地址，
   + IPv4 0.0.0.0
   + IPv6 0.0.0.0.0.0.0.0
   + 通配地址可以匹配本地系统中的所有地址
 * isLookbackAddress()
   + 是否为回路地址
   + IPv4 127.0.0.1
   + IPv6 0.0.0.0.0.0.0.1(又写作::1)
 * isLinkLocalAddress()
   + 在地址是IPv6本地链接地址返回true
   + 路由器不会把这些包转发出本地子网
   + 所有本地链接地址以8个字节FE80:0000:0000:0000开头。后8字节用本地地址填充，通常复制为由以太网卡生产商分配的以太网MAC地址。
 * isSiteLocalAddress()
   + 在地址是IPv6本地网站地址时返回true
   + 会被路由器在网站或校园内转发，但不应当转发出网站。
   + 本地网站地址以8个字节FEC0:0000:0000:0000开头。后8字节用本地地址填充，通常复制为由以太网卡生产商分配的以太网MAC地址。
 * isMulticastAddress()
   + 在地址是组播地址时返回true
   + 组播会将内容广播给所有预定的计算机，而不是某一台。
   + IPv4 组播地址位于224.0.0.0-239.255.255.255
   + IPv6 组播地址都以字节FF开头
 * isMCGlobal()
   + 在地址是全球组播地址时返回true
   + 全球组播地址是世界范围内的预定地址。
   + 所有组播地址都在FF开头。
   + IPv6 全球组播地址以FF0E或FF1E开头，这取决于此组播地址是已知的永久分配地址，还是临时地址。
   + IPv4 所有组播地址都是全球范围的。
 * isMCOrgLocal()
   + 在地址是组织范围组播地址时返回true
   + 可能包括公司或组织所有网站的预定地址，但不包括组织外部地址。
   + 组织组播地址以FF08或FF18开头，取决组播地址是永久分配地址，还是临时地址。
 * isMCSiteLocal()
   + 在地址是网站范围组播地址时返回true
   + 寻址到风站范围地址的包只会在本地网站内传输。
   + 网站组播地址以FF05或FF15开头，取决组播地址是永久分配地址，还是临时地址。
 * isMCLinkLocal()
   + 在地址是子网范围组播地址时返回true
   + 寻址到本地链接地址的包只会在自己的子网内传输
   + 本地铰接组播地址以FF02或FF12开头，取决组播地址是永久分配地址，还是临时地址。
 * isMCNodeLocal()
   + 在地址是本地接口组播地址时返回true
   + 寻址到本地接口地址的包不能发送出最初的网络接口，即使是相同节点的不同网络接口也不行。
   + 主要用于网络调试和测试。
   + 本地接口组播地址以两个字节FF01或FF11开头，取决组播地址是永久分配地址，还是临时地址。