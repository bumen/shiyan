## 软件测试
 * 内部压力
 * 基于云计算的压力测试
 * 用户视角的外部压测
 * 性能测试相关术语：
   + 响应时间
   + 并发用户数
   + 事务响应时间
   + 吞吐量
   + TPS（每秒事务响应数）
   + 性能计数器等。
 * 性能测试方法：
   + 负载测试（Load Testing）
   + 压力测试（Stress Testing）
   + 配置测试
   + 并发测试
   + 可靠性测试等。疲劳强度测试
 * 性能测试工具架构一般包括：
   + 虚拟用户脚本产生器（Virtual User Generator）
   + 压力产生器（player）
   + 用户代理（Agent）
   + 压力调度和监控系统（Controller）
   + 压力结果分析工具（Analysis）。
   
### 元件的作用域
 * 取样器 是典型的不与其它元件发生交互作用的元件
 * 逻辑控制器 只对其子节点的取样器有效，而其它元件（config elements 、timers 、post-processors、assertions、listeners）
 需要与取样器（sampler）等元件交互。
 * 配置元件（config elements）
   + 元件会影响其作用范围内的所有元件。
   + 默认配置
     - 多个元件中设置的值可以在作用域内叠加
   + 管理器
     - 多个逻辑控制器元件的效果则不能进行叠加
     - 则在重叠 作用域内的取样器元件只会随机受到其中一个的作用
 * 前置处理程序（Per-processors）
   + 元件在其作用范围内的每一个sampler元件之前执行。
 * 定时器（timers ）
   + 元件对其作用范围内的每一个sampler有效。
     
 * 后置处理程序（Post-processors）
   + 元件在其作用范围内的每一个sampler元件之后执行。
     
 * 断言（Assertions）
   + 元件对其作用范围内的每一个sampler元件执行后的结果执行校验。
     
 * 监听器（Listeners）
   + 元件收集其作用范围的每一个sampler元件的信息并呈现。
     
 * 元件的作用域是靠测试计划的的树型结构中元件的父子关系来确定的
   + 原则
      - 取样器（sampler）元件不和其它元件相互作用，因此不存在作用域的问题。
      - 逻辑控制器（Logic Controller）元件只对其子节点中的取样器 和 逻辑控制器作用。
      - 除取样器和逻辑控制器元件外，其他6类元件，如果是某个sampler的子节点，则该元件会对其父子节点起作用。
      - 除取样器和逻辑控制器元件外，其他6类元件，如果其父节点不是sampler ，则其作用域是该元件父节点下的其他所有后代节点（包括子节点，子节点的子节点等）。
        
### 元件的执行顺序
 1. 配置元件（config elements ）
 2. 前置处理程序（Per-processors）
 3. 定时器（timers ）
 4. 取样器（Sampler）
 5. 后置处理程序（Post-processors）（除非Sampler 得到的返回结果为空）。
 6. 断言（Assertions）（除非Sampler 得到的返回结果为空）。
 7. 监听器（Listeners）（除非Sampler 得到的返回结果为空）。
 
 * 注意
   + 前置处理器、后置处理器和断言等元件只能对 取样器起作用，因此，如果在它们的作用域内没有任何取样器，则不会被执行
   + 如果在同一作用域范围内有多个同一类型的元件，则这些元件按照它们在测试计划中的上下顺序一次执行。
        
       
      

   

### 负载测试
 * 定义：通过（如逐渐增加用户数量）来观察不同负载下系统的响应时间和数据吞吐量，系统占用的资源，从而发现系统存在的瓶颈，内存泄露，不能实时同步。
 * 负载测试是为是发现系统的性能问题，通过发现系统特性或行为来发现问题。
 * 负载测试目的：是发现软件缺陷
 * 负载测试可以看作性能测试的一部分
 
### 压力测试
 * 定义：在强负载（大数据量，大并发）下测试，分为高负载下的长时间（如24小时以上）的稳定压力测试或极限负载情况下导致系统崩溃的破坏性测试
 * 压力测试可以看作是负载测试的一种，即高负载下的测试。
   + 压力测试可以更快发现内存泄漏，发现性能问题
   + 
   
### 性能测试
 * 目的：是为了获取性能指标
   + 在同样负载的情况下改变系统的结构，改变算法，改变硬件来得到性能指标数据  
 * 性能测试使用负载测试的技术，使用负载测试工具。获得不同负载情况下的性能指标数据
 * 主要手段是通过产生模拟真实业务的压力对被测系统进行加压，与此同时监控被测系统的各项性能指标，研究被测系统在不同压力情况下的表现，找出其潜在的性能瓶颈

### 系统资源性能指标
 * 服务器：CPU利用率、处理器队列长度、内存利用率、内存交换页面数、磁盘IO状态、网卡带宽使用情况等；
 * 数据库：数据库连接数、数据库读写响应时长、数据库读写吞吐量等；
 * 网络：网络吞吐量、网络带宽、网络缓冲池大小；
 * 缓存（Redis）：静态资源缓存命中率、动态数据缓存命中率、缓存吞吐量等；
 * 测试设备（压力发生器）：CPU利用率、处理器队列长度、内存利用率、内存交换页面数、磁盘IO状态、网卡带宽使用情况等。
 * 结论要点2：性能瓶颈定位的重点在于性能指标的监控和分析。
 ``` 
  需要说明的是，性能指标之间通常都是有密切关联的，单纯地看某个指标往往很难定位出性能瓶颈
  举个简单的例子，压力测试时发现服务器端CPU利用率非常高，那这个能说明什么问题呢？
  是服务端应用程序的算法问题，还是服务器硬件资源配置跟不上呢？光看这一个指标并不能定位出产生问题的真正原因，
  而如果仅因为这一点，就决定直接去优化程序算法或者升级服务器配置，最后也很难真正地解决问题。
 ```
 
### 性能测试工具的基本组成
 * 压力生成器（Virtual User Generator）:压力发生器对应的是众多测试人员
 * 结果采集器（Result Collector）: 结果采集器对应的是结果记录人员。采集每个测试人员操作结果
 * 负载控制器（Controller）: 负载控制器对应的是指挥人员。控制并发执行
 * 系统资源监控器（Monitor）: 资源监控器对应的是若干资源监控人员
 * 结果分析器（Analysis）: 结果分析器对应的是结果统计人员