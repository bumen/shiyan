###   硬盘
 * hd硬盘, sd硬盘
 * 第几块
   + 第1块hd硬盘：hda
   + 第2块sd硬盘：sdb

### 分区
  * 主分区1-4
  * 扩展分区从5开始
  * 如：第2块hd硬盘的第一个主分区 
    + hdb1
  * 如：第2块hd硬盘的第一个扩展分区
    + hdb5

### 命令行快捷键
  * ctrl + U：删除光标之前内容
  * ctrl + K：删除光标之后内容 
  * ctrl + A：移动光标到行开头
  * ctrl + E：移动光标到行结尾
  * ctrl + L：清屏
  * ctrl + B：删除光标前一个字符
  * ctrl + D：删除光标后一个字符
  * ctrl + F：移动光标向后一个字符
  * ctrl + H：移动光标向前一个字符
  * \ 可以换行

### 命令
  * ls 
    + l：长格式显示
    + d：只显示目录
    + A：显示所有内容。但当前目录. 与父目录..不显示
    + a：显示所有内容
    + h：人性化显示
    + R：递归
    + --color
  * mkdir
     + p 递归创建目录 
  * du：统计目录及文件的空间占用情况
     + a：统计所有文件与目录
     + h：人性化显示
     + s：只统计指定的目录或文件。不递归子目录与文件
  * cp
     + f：自动强制复制
     + i：提示
     + p：保留属性不变
     + r：递归复制
  * find
     + find [范围] [查找条件]
     + 查找条件：
     -name
     -size：大小单位：k, M, G。+，-设置大于小于
     -type：f文件，d目录，
     -user
     -a：and条件
     -o：or条件
     +  find . -name "server-error*"
  * ln：创建软链接
     - 硬链接不能创建目录，不能跨分区创建
  * wc
    + c：统计字节数
    + l：统计行数
    + w：统计文件内中的单词数
  * gzip
    + 使用.gz
  * bzip2
    + 使用bz2
  * tar
    + c：创建.tar文件
    + C：解包时指定释放的目录文件夹
    + f：指定文件
    + j：调用bzip2进行压缩与解压
    + p：打包时保留文件及目录权限
    + t：查看包中列表
    + v：详细信息
    + x：解开.tar文件
    + z：调用gzip进行压缩与解压
 
### vi编辑器
  * 模式：命令行，输入模式，末行模式
  * 命令行
    + 按：进入末行模式。按a,i,o进入输入模式
  * 末行模式
    + 按esc退出到命令行模式
  * 输入模式
    + 按esc退出到命令行模式
  * 命令行进入输入模式
    + a：在光标位置之后插入
    + A：在光标所在行，行尾插入
    + i：在光标位置之前插入
    + I：在光标所在行，行开头插入
    + o：在光标所在行下插入行
    + O：在光标所在行前插入行
    + ctrl+F：向下翻页 
    + ctrl+B：向上翻页
    + ^, 0： 跳到行首
    + $： 跳到行尾
    + 1G, gg：跳到第1行
    + G：跳到最后一行
    + #G：跳第#行
    + x：删除光标处一个字符
    + dd：删除当前行
    + #dd：删除光标后#行
    + d^：删除光标之前所有内容
    + d$：删除光标之后所有内容
    + yy：复制当前行
    + #yy：复制#行
    + p：粘贴到光标之后
    + P：粘贴到光标之前
    + u：单步撤销
    + U：撤销所有
    + /regx：从当前光标处向后查找
    + ?regx：从当前光标处向前查找
    + n, N：选择不同的结果

### 安装包
 * configure：配置安装包变量。执行完了生成一个makefile
 * make：根据makefile编译安装包
 * make install：安装包

### 用户
 * 超级用户。普通用户，程序用户
* 超级用户：root
* 普通用户：由root创建的用户
* 程序用户：系统配置的一些低等级用户，一般没有登录权限
* UID
    + root的为0
    + 普通用户：500-60000
    + 程序用户：1-499 
* /etc/passwd
    + 保存用户信息
    + 1字段：用户名
    + 2--：密码占位符
    + 3--：uid
    + 4--：gid基本组
    + 5--：说明
    + 6--：宿主目录。用户登录后进入的目录
    + 7--：登录后使用的shell

* /etc/shadow
    + 保存密码信息：只有root可读取，不允许直接编译
    + 1字段：用户名
    + 2--：md5加密的密码。*或!!表示此用户不能登录。空表示不需要密码
    + 3--：上次修改密码时间。从19700101起到最近一次修改密码时间天数
    + 4--：密码最短有效天数，自本次修改密码后，多久才能再次修改。默认0，表示不进行限制
    + 5--：密码最长有效期，自本次修改密码后，多久后必须再次修改，默认99999，表示不进行限制
    + 6--：提前几天警告用户密码将过期。默认7
    + 7--：密码过期后多少天禁用此用户
    + 8--：账号失效时间。表示用户已经失效多少天（从19700101算），默认空，表示账号永久可用
    + 9--：保留字段，无意思
* useradd [选项] 用户名
    + 在/etc/passwd, etc/shadow行尾添加用户
    + 未明确指定宿主目录，则在/home创建目录，并创建初始配置文件
    + 未指定组，自动创建与该用户账号同名的基本组。保存到/etc/group, /etc/gshadow
    + -u：指定uid。未被使用的uid
    + -d：指定宿主目录
    + -e：指定失效时间，yyyy-mm-dd
    + -g：指定用户基本组名，或GID
    + -G：指定用户附加组名，或GID
    + -M：不建立使用者目录 
    + -s：指定登录shell
* passwd 用户名
    + 用户必须设置密码才能使用
    + -d：清空密码，仅使用用户名登录
    + -l：锁定用户
    + -S：查看用户状态
    + -u：解锁用户
* usermod
    + 修改用户
    + -u：修改用户uid
    + -d：修改用户宿主目录
    + -e：修改用户失效时间
    + -g：修改用户基本组
    + -G：修改附加组
    + -M：不创建宿主目录
    + -s：指定登录shell
    + -l：更改用户名
    + -L：锁定用户
    + -U：解锁用户
* userdel
    + 删除用户
    + -r：同时删除宿主目录
* id 用户名
    + 查看用户状态
### 组
* 每个用户都属于一个组：为基本组
* 每个用户还可以同时属于其它组：为附加组
* GID
    + root的为0
    + 普通用户：500-60000
    + 程序用户：1-499
* groupadd
    + 添加组
* gpasswd
    + -a：添加用户到组
    `gpasswd -a u1 root`
    + -d：删除组中的用户
    `gpaswd -d u1 root`
    + -M：同时添加多个用户到组
    `gpasswd -M u1, u2 g1`
* groupdel
    + 删除组
* groups [用户名]
    + 查找某个用户下的所有组
* finger
    + 查找用户详细信息
    + -l
* users, w, who 查询用户信息

#### 权限
 * 用户权限，组权限，其他用户权限
* chmod [ugoa][+-][rwx] 目录或文件
    + u：当前用户
    + g：组
    + o：其他人
    + a：所有
    + r, w, x, +, -
    + R：递归
    + 如：chmod ug-x  data/  chmod u-x, g-x data/

#### 归属
 * chown 属主[:组] 文件或目录
    + R：递归
    + 如：chown :wheel data/
    chown u1:wheel mymkdir

#### 附加权限
 * SET位权限（SUID, SGID)
    + 一般用于给可执行程序或脚本文件进行设置
    + SUID表示对属主用户增加SET位
    + GUID表示对属组内的用户增加SET位
    + 执行文件在被设置了SET位后，任何用户在执行该文件时，将获得该文件属主、属组账号对应的身份
    + u+s, g+s设置
    + 或数字4对应设置SUID, 2对应设置GUID
    + 如：chmod u+s, g+s mymkdir。 或chmod 4777 mydir chmod 6777 mydir
* 粘滞位权限
    + 主要用于为目录设置特殊附加权限
    当目录设置了粘滞位后，即便用户有写目录权限。也不能删除该目录中其他用户的文件数据
    + 如：tmp目录
    + 通过 +t -t设置。或1添加，0减少设置
    + 如：chmod o+t mydir或 chmod 1777 mydir

### 硬盘
 * fdisk -l 
    + 查看磁盘使用
* 查看磁盘使用情况
    + df -hT


### linux引导流程
 * 几个阶段
    + 开机自检
    + MBR引导
    + GRUB菜单
    + 加载linux内核
    + INIT进程初始化
#### INIT进程初始化
    + 将/sbin/init程序加载到内存中运行，init进程负责完成一系列系统初始化过程
    + 读取配置文件/etc/inittab.根据配置内容首先执行初始化脚本文件/etc/rc.d/rc.sysinit
    并通过/etc/rc.d/rc脚本文件控制应该启动哪些程序和服务。最后执行终端程序/sbin/mingetty
    + 决定系统初始化过程着急在于init进程及配置文件/etc/inittab
    + 决定系统启动后自动运行哪些程序的关键在于/etc/rc.d/rc脚本
 * init进程pid= 1
    + 其它进程都是Init进程的子进程
* inittab配置
    + 四个字段组成
    + id:runlevels:action:process
    + 标识：运行级别：动作类型：程序或脚本
    + 运行级别
    0：关机状态
    1：单用户模式，多用于维护，不需要密码登录
    2：字符界面多用户模式，不支持网络
    3：字符界面多用户模式
    4：分配使用
    5：图形界面多用户模式
    6：重新启动
    + action动作
    initdefault：初始化系统默认进入的运行级别
    sysinit：设置系统初始化的操作脚本
    wait：init进程将等待该行配置对应的脚本执行完成后，再继续执行
    ctrlaltdel：按ctrl+alt+del操作
    powerfail：当收到系统断电信号时采取动作
    powerokwait：设置当系统收到恢供电信号时采取何种动作
    respawn：一旦该配置行所对应的进程被终止，则重新启动该进程
* rc.sysinit
    + 这是一个Init进程所调用的系统初始脚本，位于/etc/rc.d/rc.sysinit
    + 主要完成：设置网络，主机名，加载文件系统，设置时钟等
* rc脚本
    + 同样由Init进程进行调用，位于/etc/rc.d/rc
    + rc脚本通过指定不同的级别参数分别加载及终止不同的系统服务
    + inittab中会配置 
    10:0:wait:/etc/rc.d/rc 0
    11:1:wait:/etc/rc.d/rc 1
    + 根据参数启动不同的目录脚本
    位于/etc/rc.d/rc0.d, rc1.d, rc2.d, rc3.d 等等
    + 其实rc*.d目录下的文件是/etc/rc.d/init.d/目录下的文件链接
    S开头的文件表示启动对应服务，K开关表示终止对应服务
    +init.d/目录下的服务都可以通过servic命令来操作start stop restart status reload
* rc.local脚本
    + 是一个额外的启动控制文件，位于/etc/rc.d/rc.local
    + 通常由rc脚本在最后进行加载。
    + 作用主要是为管理员自行设置启动命令提供一种途径
    + 需要在开机后自动执行的一些命令操作，都可以添加到该文件中
* 系统运行级别
    + 查看runlevel
    + 切换：init [leve](0-6)
    或配置/etc/inittab
* 配置运行级别任务
    + ntsysv --level 35。可以同时配置3，5级任务
* chkconfig
    + --list [任务名]
    +  --level [级别] [任务名] on|off
    +  如：chkconfig --list 列出所有 
    chkconfig --list netword 
    chkconfig --level 24 network off
### 进程管理
 * ps：查看静态的进程统计信息
    + a：显示当前终端下的所有进程信息，
    + u：使用以用户为主的格式输出进程信息
    + x：显示当前用户在所有终端下的进程信息
    + -e：显示系统内的所有进程信息
    + -l：使用长格式显示进程信息
    + -f：使用完整的格式显示进程信息
    + 不使用任何选项的ps命令，将只显示当前用户会话中所打开的进程
 * ps aux命令结果
    + user
    + pid
    + tty
    + stat：显示进程当前状态，如 S(休眠）、R(运行）、Z（僵死）、<（高优先级）、N（低优先级）、s（父进程）、+（前台进程）。对于僵死的进程应该手动终止。
    + start：启动进程时间
    + time：进程占用cpu时间
    + command：启动进程的命令名称
    + cpu：占用百分比
    + mem：内存占用百分比
    + vsz：占用虚拟内存（swap空间）大小
    + rss：占用常驻内存（物理内存）大小
* top：查看进程动态信息
    + 默认3秒刷新一次
    + P键根据cpu占用情况对进程列表进行排序
    + M键根据内存占用情况进行排序
    + N键根据启动时间进行排序
    + k键。可以根据输入的进程Pid来结束指定进程
* pgrep：查询进程信息
    + 查询某个进程的Pid
    + -l：列出对应进程名称
    + -U：由某个用户运行的进程
    + -t：指定某个终端上运行的进程
* ptree：查看进程树
    + -p：可以同时列出对应的Pid
    + -u：可以列出对应的用户名
    + -a：列出完整信息
### 控制进程
 * 前台运行和后台运行
    + 前台运行占用命令行
    + 后台运行需要在命令尾加上“&”
* 调度启动进程
    + at：一次性任务
    + crontab：周期性任务
* 将当前终端运行的前台进程调入后台
    + ctrl + z：将前台进程调入后台，同时进程停止执行
*查看当前终端的后台进程
    ＋jobs。-l参数可以同时显示pid
* 将后台进程恢复到前台运行
    + fg [number]
* 终止进程
    + ctrl +c ：终止当前终端前台执行的进程
    + 如果ctrl+c无法终止，或以需要终止其它终端的，后台运行的进程时。使用kill killall, pkill
    + kill pid
    给该进程发送终止信号并正常退出运行。若进程已经无法响应终止信号，则可以使用 -9强行杀死进程。
* killall
    + 可以通过进程名杀死进程，当需要结束系统中多个相同名称的进程时，使用。
* pkill
    + 可以根据进程名称，运行进程的用户、进程所在终端等多种属性终止进程。
    + -U：用户名称
    + -t：终端名称
   ＋如：ｗ命令找出所有登录到系统中的可疑用户。然后用pkill删除
### 计划任务管理
* at：一次性任务
    + 设置的计划任务只在指定的时间点执行一次
    + 确保atd服务已经运行
    + 使用时间、日期作为参数（只指定时间表示当前天的该时间，只指定日期表示该日期的不前时间）
    + 进程at>命令界面，每行设置一条命令。可以依次设置多条命令
    + ctrl+d提交任务
    + 注意：时间与日期必须是当前系统的时刻之后，否则无法正确设置任务。
* atq：查询还没有执行的计划任务
* atrm [number]：删除计划任务
* crontab：周期任务
    + crond服务必须启动
    + crond通过多个目录和文件设置计划任务，不同类型的任务由不同的配置文件进行设置。
    + /etc/crontab：系统任务配置文件
    /etc/cron.hourly：目录下是每小时执行的任务
    /etc/cron.daily：目录下是每天执行的任务
    /etc/cron.weekly：目录 下是每周执行的任务
    /etc/cron.monthly：目录 下是每月执行的任务
    + /var/spool/cron/：是用户cron任务配置存放目录 
    由用户自行设置（使用crontab命令）的cron任务被保存在目录/var/spool/cron/下，文件名对应的账户账号名
    + crond守护进程每分钟都会检查/etc/crontab文件，/etc/cron.d/目录，/var/spool/cron/目录中的改变，
    如果发现有改变，它们就会被载入内存，所以当某个crontab文件改变后不需要重新启动就可以生效
    + -e：编辑计划任务
    + -u：指定所管理的计划任务属于哪个用户，默认时针对当前用户。（一般只有root用户有权限使用此选项）
    + -l：显示计划任务列表 
    + -r：删除计划任务列表 
    + 编辑界面，每行代表一个记录。每个记录有6个字段
    + 分钟：
    + 小时：
    + 日期：
    + 月分：
    + 星期：0-7：0或7代表周日
    + 命令：
    + 减号：表示一个连接范围
    + 逗号：表示间隔不连接范围
    + 斜杠/：指定间隔频率：如日期字段中*/3表示每隔3天
    + 注意：因为各条件任务执行并不需要用户登录，所以建议命令使用绝对路径。
    在设置非分钟任务时，分钟字段也要写一个具体的时间数值，而不要保留为默认*，否则将会在每分钟执行一次计划任务
    + 当需要按照同一周期运行多项任务时，通常会将相关命令操作编写成脚本文件，然后在计划任务配置中加载该脚本并执行。

