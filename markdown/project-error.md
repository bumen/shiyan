## 项目中的问题


### centos服务器下长时间跑sprint boot2.0.4应用程序/tmp临时目录满后系统会自动删除临时目录
 * 再次上传时，会抛出异常
```
There was an unexpected error (type=Internal Server Error, status=500).
Failed to parse multipart servlet request; nested exception is java.io.IOException: 
The temporary upload location [/tmp/tomcat.8145190609103780086.8090/work/Tomcat/localhost/ROOT] is not valid
```

### http post 发送form-data与x-www-form-urlencoded区别


### 网络问题

#### netty网络延时01
 * 场景A给B发送消息
   + A通过同一tcp连接会连续给B发送上传文件消息，一个大文件拆分为多个512B字节大小消息发送。一直发送直到一个文件发送完成
   接着发送下一个文件。
   + 每发送一个文件同时会异步开启5s超时定时器。作用是监听文件上传状态。
   如果超时后不会再处理之后收到的B返回的状态消息
   + B再收到上传消息后，处理消息。当处理几秒后会返回上传状态给A
   
 * 网络延时问题
   + 因为A不停发送第一个文件所有消息, 同时开启超时定时器
   当网络延时时，B很晚才收到A发送的第一个文件数据，从而处理导致上传状态下发延时，导致A超时后才收到上传状态，从而A以为没有收到。
   + 当A通过发送完第一个文件后，再通过同一条TCP连接发送第二个文件时。
   因为此时B正在处理第一个文件的数据，当处理完第一个文件数据后再接收到第二个文件数据时又延时了，又导致A第二文件监听超时了。
   + 如果A再连接发送第N个文件，导致后面所有文件都超时
   
 * 模拟 
   + A发送一个文件开始监听时间12:00，即12:05后就会超时。
   A要求4秒后给A返回上传状态，即A要求12:04收到上传状态，即为正常。
   + 由于网络延时，B收到第一个文件的第一个包是12:02，B会一直接收当12:06时（4秒后，此时A已经超时）需要B下发上传状态消息。
   但B还在接收A发送的第一个文件消息。
   + A发送完第一个文件后（A已经把消息发送了到缓冲区中，缓冲区会一直发送直到完。即时超时也不会停止）。
   开始发送第二个文件：12：06, 当12：11会超时
   + B再12:08时接收完第一个文件。（所以当A再发送第二个文件时，B还再接收第一个文件数据）
   开始接收第二个文件：12：09，4秒后12：13时会下发第二个文件上传状态。但此时A的第二文件早已经超时。
   + 如果A继续使用同一TCP发送。则会导致后面的一直超时
 
 * 解决
   1。A当第一个超时后，再发送第二个时使用新连接发送
  