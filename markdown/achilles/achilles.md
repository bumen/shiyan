## 游戏服务器设计经验
#### 资源-道具
 * 资源的添加与删除使用统一接口操作
 * 同时资源背包只是累加或减少接口只作增加和删除操作，不要添加额外业务逻辑。如再作资源转换，发消息，触发事件等
   + 其它复杂逻辑放到上层处理
 * 如果在资源添加或删除操作结束后，有发消息通知客户端资源变量等操作。可以再抽象出一层接口来操作
 
#### 网络模块
 * 消息类型
   + request与response
   + notify
   
 * 协议分层。类似OSI模型7层
   + tcp协议是5层，所以需要自己实现另外2层
 

#### 业务线程模块

#### 业务模块
 * 业务需求01
   + 不同业务可能都会产出同一种资源，但是在给玩家身上添加完资源后，有一些是通用处理。然后有一部分自己处理
      - 如不同业务产出经验值exp, 给玩家加exp后，导致玩家升级，有的需要升级后通知前端，有的不需要通知
   + 不同业务发奖，但不知道奖品都具体有哪些（配置的。不同类型，多个），所以需要一个统一加奖励接口。但奖品会触发相关的业务逻辑 
      - 如：头像框被发奖了，需要激活解锁状态。需要通知前端
      
 * 业务中业务之间不要什么事件触发，容易死循环。业务逻辑不好了解
 
 * 业务关联的用户，用么用rid或player传递，不要使用Threadlocal
 
 * 

#### 消息模块

#### 数据库模块
 * 异部落地

#### 缓存模块
 * 离线玩家数据
 * 内存缓存与redis
 
 * protobuf 反序列化默认值问题
   + 如果一个对象为null, 反序列后返回一个默认非null值。可能会导致业务逻辑判断问题
   

#### 日志模块
 * 按模块化分
 * 线上info级别日志
   + 可以做统一日志接口，提供只打印某个player的debug级别日志。可以查询异常玩家日志机会

#### rpc模块

#### 调度模块

#### 服务器配置文件模块

#### 业务配置模块

#### 统计模块

#### 服务器启动模块

#### 充值模块

 
### sofa-rpc
   + https://juejin.im/user/5a42596ff265da43062b06e8
   + https://mp.weixin.qq.com/s/WusXmhMnsvQ1tQh5wiCyDw
   
### java对象占用内存大小计算
 * 首先需要了解Java对象在内存中的实际存储方式和存储格式
 * 涉及内存模型、锁原理、分代GC、OOP-Klass模型等内容
 
 
### TDR(Technical Design Review)
 * 技术设计审查
 
   
 
 