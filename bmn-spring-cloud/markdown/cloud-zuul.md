## zuul API网关服务

### 问题描述
 * 路由规则与服务实例的维护问题：外层的负载均衡（nginx）需要维护所有服务实例清单
 * 签名校验、登录校验冗余问题：为了保证对外服务的安全性，我们在服务端实现的微服务接口，往往都会有一定的权限校验机制
 但我们服务是独立的，我们不得不在这些应用中都实现这样一套校验逻辑，这就会造成校验逻辑的冗余。
 
### API网关
 * 通过zuul与Eureka整合，将自身注册到Eureka-server，同时从Eureka-server中获取所有其它微服务实例信息。
 外层调用都必须通过API网关，使得将维护服务实例的工作交给服务治理框架自动完成。
 * 在API网关服务上进行统一调用来对微服务接口做前置过滤，以实现对微服务接口的拦截和校验。
 
### zuul特性
 * 天生拥有线程隔离和断路器的自我保护功能，以及对服务调用的客户端负载均衡功能。
 也就是说zuul也支持hystrix和ribbon.
 
 * 路由匹配
 * 过滤器实现（动态过滤器）
 * 默认会过滤掉Cookie与敏感的http头信息
 
### zuul与feign
 * zuul是对外暴露的唯一接口相当于路由的是controller请求，而ribbon和feign路由了service请求
 * zuul是最外层请求的负载均衡，而ribbon和feign做的是系统内部各个微服务的service的调用的负载均衡